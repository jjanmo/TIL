# Closure

```
A closure is the combination of a function bundled together (enclosed) with references to its surrounding state
(the lexical environment). In other words, a closure gives you access to an outer functionâ€™s scope from an inner
function. In JavaScript, closures are created every time a function is created, at function creation time.
```

> ìœ„ì˜ ë¬¸ì¥ì€ [MDN Closures](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures)ì—ì„œ í´ë¡œì €ì— ëŒ€í•´ì„œ ì •ì˜í•œ ê²ƒì´ë‹¤. ëª¨ìë€ ì˜ì–´ ëŠ¥ë ¥ì„ ì´ ë™ì›í•´ì„œ í•´ì„í•´ë³´ê² ë‹¤.ğŸ˜…

```
í´ë¡œì €ëŠ” í´ë¡œì € ì£¼ë³€ì˜ ìƒíƒœì— ëŒ€í•œ ì°¸ì¡°(lexical environment)ë¥¼ í•¨ê»˜ ë¬¶ì€ í•¨ìˆ˜ì˜ ì¡°í•©ì´ë‹¤. ë‹¤ë¥¸ ë§ë¡œ ë§í•˜ë©´, í´ë¡œì €ëŠ”
í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ í•¨ìˆ˜ ì™¸ë¶€ì— ì ‘ê·¼ í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ í´ë¡œì €ëŠ” í•¨ìˆ˜ê°€ ìƒì„±ë˜ëŠ” ì‹œê¸°ì— ìƒì„±ëœë‹¤.
```

> í´ë¡œì €ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„  ë¨¼ì € `í´ë¡œì € ì£¼ë³€ì˜ ìƒíƒœì— ëŒ€í•œ ì°¸ì¡°(lexical environment)`ê°€ ë¬´ì—‡ì¸ì§€ë¥¼ ì•Œì•„ì•¼ í•œë‹¤. ë˜í•œ `lexical environment` ì„ ì •í™•íˆ ì•Œê¸° ìœ„í•´ì„  `execution context`ì— ëŒ€í•´ì„œ ì•Œì•„ì•¼ í•œë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì´ ë‘ê°€ì§€ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ëŠ” ê²ƒì´ í´ë¡œì €ë¥¼ ì´í•´í•˜ê¸° ìœ„í•œ ì„ í–‰í•™ìŠµì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ì´ ë‘ê°€ì§€ê°€ í´ë¡œì €ì™€ ì–´ë–»ê²Œ ì—°ê²°ë˜ëŠ”ì§€ ì•Œì•„ë³´ì.

# Execution context ì™€ Lexical environment

1. execution context(ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸)ë€ ë¬´ì—‡ì¸ê°€

- **`ì‹¤í–‰ ê°€ëŠ¥í•œ ì½”ë“œ`ë¥¼ ë§Œë‚¬ì„ ë•Œ ìƒì„±ë˜ëŠ” ì»¨í…ìŠ¤íŠ¸**ì´ë‹¤. ë‹¤ì‹œ ë§í•´ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ëŠ” ìŠ¤í¬ë¦½íŠ¸ í˜¹ì€ í•¨ìˆ˜ë“±ì´ ì‹¤í–‰ë  ë•Œ ìƒì„±ë˜ëŠ” ê²ƒìœ¼ë¡œì„œ ì‹¤í–‰ì— í•„ìš”í•œ ìš”ì†Œë¥¼ ê°ì²´ ë¬¶ìŒìœ¼ë¡œ ë‹´ê³  ìˆë‹¤.

  > ì‹¤í–‰ ê°€ëŠ¥í•œ ì½”ë“œë€ `1)ì „ì—­ì½”ë“œ` `2)í•¨ìˆ˜ì½”ë“œ` 3)evalì½”ë“œê°€ ìˆë‹¤. (_evalì½”ë“œëŠ” ê´€ì ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì—¬ê¸°ì„œ ë…¼ì™¸ë¡œ í•˜ê² ë‹¤._)

  ![execution context](../../image/execution-context.png)

  > ìœ„ ì½”ë“œì˜ ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ëœë‹¤ê³  í•˜ì. ì²«ë²ˆì§¸ë¡œ 1)ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ë  ë•Œ ê°€ì¥ ë¨¼ì € `ê¸€ë¡œë²Œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸`ê°€ ìƒì„±ëœë‹¤. ì´ì œ ìœ„ì—ì„œë¶€í„° ì½”ë“œë¥¼ ì½ì–´ë‚˜ê°€ë©´ì„œ ê°ê°ì˜ `function object`ë“¤ì´ ìƒì„±ëœë‹¤. ê·¸ëŸ¬ë‹¤ê°€ í•¨ìˆ˜ í˜¸ì¶œë¶€ë¥¼ ë§Œë‚œë‹¤. 2)í•¨ìˆ˜ fooê°€ í˜¸ì¶œë  ë•Œ `í•¨ìˆ˜ fooì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸`ê°€ ìƒì„±ëœë‹¤. í•¨ìˆ˜ fooê°€ ì¢…ë£Œë˜ê³  3)í•¨ìˆ˜ barê°€ í˜¸ì¶œ ëœë‹¤. ì´ ë•Œ `í•¨ìˆ˜ barì˜ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸`ê°€ ìƒì„±ëœë‹¤. í•¨ìˆ˜ bar ì•ˆì—ì„œ 3)í•¨ìˆ˜ bazê°€ í˜¸ì¶œë˜ê³  ê·¸ ë•Œ `bazì˜ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸`ê°€ ìƒì„±ëœë‹¤.

  > ì´ë ‡ê²Œ ê°ê°ì˜ í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•Œ(ì‹¤í–‰ë  ë•Œ), ì‹¤í–‰ì»¨ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ê³  ì´ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ëŠ” ì½œìŠ¤íƒì˜ ë§¨ ìœ„ì— ìŒ“ì´ê²Œ ëœë‹¤.(ìœ„ì˜ ì´ë¯¸ì§€ëŠ” ìˆœì„œë¥¼ ì˜ë¯¸í•˜ëŠ” ê²ƒì´ì§€ ì •í™•íˆ ë§ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. í•¨ìˆ˜ê°€ ì¢…ë£Œë˜ë©´ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ëŠ” ì‚¬ë¼ì§„ë‹¤.)

2.  ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ì˜ êµ¬ì„±

3.  ê·¸ë ‡ë‹¤ë©´ `lexical environment` ì€ ë¬´ì—‡ì¼ê¹Œ?

> `lexical`ì˜ ì‚¬ì „ì  ì˜ë¯¸ëŠ” `ì–´íœ˜ì , ì‚¬ì „ì `ì´ë€ ì˜ë¯¸ì´ë‹¤. ê·¸ë ‡ë‹¤ë©´ `lexical environment`ì€ `ì–´íœ˜ì  í™˜ê²½` ì´ë¼ëŠ” ë§ì´ ëœë‹¤. ì´ ì˜ë¯¸ë¥¼ ë“£ê³  'ì•„í•˜' í•˜ê³  ê¹¨ë‹¬ìŒì„ ì–»ëŠ”ë‹¤ë©´ ê·¸ ì˜ë¯¸ë¥¼ ì•Œë ¤ì£¼ì‹œê¸¸ ë°”ë€ë‹¤. ì´ ìš©ì–´ë¥¼ ì²˜ìŒ ì ‘í–ˆì„ ë•Œ, ë¬´ìŠ¨ ì˜ë¯¸ì¸ì§€ **NEVER** ì´í•´í•˜ì§€ ëª»í–ˆë‹¤. ì§€ê¸ˆì€ ì•½ê°„ ì´í•´í•œë‹¤ê³  ë§í•  ìˆ˜ ìˆì„ê¹Œ?

-

# ì´ì œ closureê°€ ë¬´ì—‡ì¸ì§€ `ê°` ì¡ì„ìˆ˜ ìˆì„ê¹Œ?

> ê°„ë‹¨í•œ ì˜ˆë¥¼ í†µí•´ í´ë¡œì €ë¼ëŠ” ê²ƒì´ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³´ì

```javascript

```

# Why we need closure

- ì ‘ê·¼ê¶Œí•œë³´í˜¸
- ì§€ì—­ë³€ìˆ˜ ë³´í˜¸
- ë°ì´í„° ë³´ì¡´ ë° í™œìš©

# Quiz

## 1

## 2

## 3

# Ref

- [MDN Closures](https://developer.mozilla.org/ko/docs/Web/JavaScript/Guide/Closures)

- [Understanding Scope in JavaScript](https://scotch.io/tutorials/understanding-scope-in-javascript#toc-context)

- [Understanding Execution Context and Execution Stack in Javascript](https://blog.bitsrc.io/understanding-execution-context-and-execution-stack-in-javascript-1c9ea8642dd0)
