# Understanding instance and instanceof

## What is instance?

-   ê°ì²´ì™€ ì¸ìŠ¤í„´ìŠ¤ëŠ” ë‹¤ë¥¸ ê²ƒì¼ê¹Œ? ê°ì²´ì™€ ì¸ìŠ¤í„´ìŠ¤ëŠ” ê°™ì€ ì˜ë¯¸ë¥¼ ê°€ì§„ ë‹¤ë¥¸ ë§(?)ì´ë‹¤. í¬ê²Œë³´ë©´ ê°™ì€ ì˜ë¯¸ë¥¼ ê°–ì§€ë§Œ ì •í™•íˆ ë§í•˜ë©´ ë‹¤ë¥¸ë§ì´ë‹¤. (ìƒí™©ì— ë”°ë¼ì„œ ë‹¤ë¥´ê²Œ ë¶€ë¥´ëŠ” ë§ì´ë¼ê³  ìƒê°í•œë‹¤.ğŸ’¨)
-   ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì›ì‹œíƒ€ì…ì„ ì œì™¸í•˜ê³  ê°ì²´ê°€ ì•„ë‹Œ ê²ƒì€ ì—†ë‹¤. í•¨ìˆ˜ë„ ê°ì²´ì´ë‹¤. ê°ì²´ëŠ” í•¨ìˆ˜ì— ì˜í•´ì„œ ë§Œë“¤ì–´ì§„ë‹¤. **ëª¨ë“  í•¨ìˆ˜ëŠ” `newì—°ì‚°ì`ì— ì˜í•´ì„œ ê°ì²´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.** í•˜ì§€ë§Œ íŠ¹ë³„í•˜ê²Œ ìš°ë¦¬ê°€ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì§€ì •í•˜ì—¬ ìƒì„±ì í•¨ìˆ˜ë¼ê³  í•œë‹¤. ì´ê²ƒì€ ìš°ë¦¬ê°€ ì•Œê¸°ìœ„í•´ì„œ ê·¸ë ‡ê²Œ ì§€ì •í•˜ëŠ” ê²ƒì´ì§€ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë‚´ë¶€ì—ì„œ ì§€ì •í•œ ê²ƒì´ ì•„ë‹ˆë‹¤.( ì£¼ë¡œ ëŒ€ë¬¸ìë¡œ í‘œê¸°í•œ í•¨ìˆ˜ëŠ” ìƒì„±ì í•¨ìˆ˜ë¥¼ ë§í•œë‹¤.)
-   ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ìƒì†ê´€ê³„ë¥¼ ì´í•´í•˜ë©´ ëª¨ë“  ê°ì²´ëŠ” ì–´ë–¤ ìƒì„±ì í•¨ìˆ˜ì— ì˜í•´ì„œ ë§Œë“¤ì–´ì¡ŒìŒì„ ì•Œ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ì´ë ‡ê²Œ `ìƒì„±ì í•¨ìˆ˜ì— ì˜í•´ì„œ ë§Œë“¤ì–´ì§„ ê²ƒë“¤`ì„ `ì¸ìŠ¤í„´ìŠ¤`ë¼ê³  í•œë‹¤. í•˜ì§€ë§Œ ìƒí™©ì— ë”°ë¼ì„œ ì´ê²ƒì„ ê·¸ëƒ¥ ê°ì²´ë¼ê³  ë¶€ë¥´ê¸°ë„ í•œë‹¤.
-   ê°ì²´ì™€ ì¸ìŠ¤í„´ìŠ¤ë¼ëŠ” ìš©ì–´ê°€ ë‚˜ì˜¬ë•Œ, ìƒì„±ì í•¨ìˆ˜ì— ì˜í•´ì„œ ìƒì„±ëœ ê°ì²´ì— ëŒ€í•´ì„œ ì´ì•¼ê¸° í•˜ëŠ” ê²ƒì¸ì§€ ê·¸ëƒ¥ ì¼ë°˜ì ì¸ ê°ì²´ë¥¼ ë§í•˜ëŠ” ê²ƒì¸ì§€ ëŒ€í•´ì„œ ë¬¸ë§¥ì— ë§ê²Œ ì´í•´í•˜ë©´ ë  ê²ƒì´ë‹¤.

## instanceof

-   `instanceof` ëŠ” ì—°ì‚°ì ì´ë‹¤.
-   syntax : `object instanceof constructor`

    > object : ê°ì²´ë¥¼ ì˜ë¯¸

    > construcotr : ìƒì„±ì í•¨ìˆ˜ë¥¼ ì˜ë¯¸
    >
    > > í•˜ì§€ë§Œ ëª¨ë“  í•¨ìˆ˜ëŠ” ë‹¤ ê°€ëŠ¥í•˜ë‹¤. ì™œëƒí•˜ë©´ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ëª¨ë“  í•¨ìˆ˜ëŠ” ìƒì„±ì í•¨ìˆ˜ì˜ ìê²©ì„ ê°–ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤ `[constructible]`

-   objectì˜ `í”„ë¡œí† íƒ€ì… ì²´ì¸(prototype chain)`ì•ˆì— `ìƒì„±ìì˜ í”„ë¡œí† íƒ€ì…(constructor.prototype)`ì´ ì¡´ì¬í•˜ë©´ true, ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ falseë¥¼ ë°˜í™˜í•œë‹¤.

## ì½”ë“œë¡œ ì‚´í´ë³´ê¸°

```javascript
function A() {}
function B() {}
function C() {}
var a = new A();
var a1 = new A();
var b = new B();
var c = new C();

console.log(a instanceof A); //1
console.log(b instanceof B); //2
console.log(c instanceof C); //3

console.log(a instanceof a1); //4

B.prototype = c;
console.log(b instanceof A); //5
console.log(b instanceof B); //6
console.log(b instanceof C); //7

console.log(b.__proto__);
//ì•„ì§ ì´ì „ì˜ B.prototypeì„ ê°€ë¥´í‚¤ê³  ìˆë‹¤.
//ê·¸ë ‡ë‹¤ë©´ bëŠ” ì–´ë–¤ í”„ë¡œí† íƒ€ì… ì²´ì¸ì— ì†í• ê¹Œ?
//ì—¬ê¸°ì„œëŠ” ì•„ì§ ì•Œ ìˆ˜ ì—†ë‹¤.

var newB = new B();
console.log(newB instanceof B); //8
console.log(newB instanceof C); //9

C.prototype = new A();
console.log(c instanceof A); //10
console.log(c instanceof B); //11
console.log(c instanceof C); //12
```

1. true
2. true
3. true
4. error

    > error message : Uncaught TypeError: Right-hand side of 'instanceof' is not `callable`

    > ì—¬ê¸°ì„œ `callable`ì´ë€ `ë¶€ë¥¼ìˆ˜ ìˆëŠ”, í˜¸ì¶œí•  ìˆ˜ ìˆëŠ”`ì˜ ëœ»ìœ¼ë¡œì„œ í•¨ìˆ˜ì˜ { }ì•ˆì— ì •ì˜ëœ ì½”ë“œë“¤ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì—ëŸ¬ë©”ì„¸ì§€ë¥¼ í•´ì„í•´ë³´ë©´, instanceof ìš°ë³€ì˜ í”¼ì—°ì‚°ìê°€ í•¨ìˆ˜ë¡œì„œ { } ì•ˆì˜ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì´ê²ƒìœ¼ë¡œ ë³´ë©´ `instanceofì˜ ìš°ë³€`ì€ ë°˜ë“œì‹œ `í•¨ìˆ˜`ê°€ ì™€ì•¼í•¨ì„ ì•Œ ìˆ˜ ìˆë‹¤.

5. false
6. false
7. false

    > ì¸ìŠ¤í„´ìŠ¤ ê°ì²´ bì˜ ìƒíƒœë¥¼ ì„¤ëª…í•˜ë©´, `ìƒì„±ìí•¨ìˆ˜ B`ëŠ” prototype í”„ë¡œí¼í‹°ì— ìƒˆë¡œìš´ ê°’ì´ í• ë‹¹ë˜ì—ˆê¸° ë•Œë¬¸ì— ì´ì „ì˜ B.prototypeì´ ì•„ë‹Œ `ìƒˆë¡œìš´ B.prtotype (ìƒˆë¡œìš´ í”„ë¡œí† íƒ€ì… ê°ì²´)`ì´ ë˜ì—ˆë‹¤. í•˜ì§€ë§Œ `ì¸ìŠ¤í„´ìŠ¤ ê°ì²´ b`ì˜ **proto**ì—ëŠ” ìƒˆë¡œìš´ ê°’ì´ ì£¼ì–´ì§„ ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì•„ì§ `ì˜ˆì „ì˜ B.prototype`ì„ ê°€ë¥´í‚¤ê³  ìˆë‹¤.

    > ì´ ë¶€ë¶„ì€ ë°‘ì—ì„œ ë‹¤ì‹œ ì¡°ì‘í•´ë³´ê² ë‹¤.

8. true
9. true

    > B.prototypeì´ ë³€ê²½ëœ ìƒì„±ì í•¨ìˆ˜ Bë¡œ ì¸ìŠ¤í„´ìŠ¤ ê°ì²´ë¥¼ ìƒì„±í•´ë³´ì•˜ë‹¤. ê³¼ì—° ê·¸ ì¸ìŠ¤í„´ìŠ¤ ê°ì²´ëŠ” ì–´ë–¤ í”„ë¡œí† íƒ€ì… ì²´ì¸ì— ì†í• ì§€ ê¶ê¸ˆí•˜ì˜€ë‹¤. 8ë²ˆì€ ë‹¹ì—°íˆ trueì´ë‹¤. ìƒì„±ì í•¨ìˆ˜ Bë¡œ ë§Œë“  ê²ƒì´ê¸°ë•Œë¬¸ì—!!

    > ê·¸ë ‡ë‹¤ë©´ 9ë²ˆì€? B.prototypeì€ ì¸ìŠ¤í„´ìŠ¤ ê°ì²´ì¸ cì´ë‹¤. ì¸ìŠ¤í„´ìŠ¤ ê°ì²´ cëŠ” ìƒì„±ì í•¨ìˆ˜ Cë¡œ ë§Œë“¤ì–´ì§€ê³  í”„ë¡œí† íƒ€ì… ê°ì²´ì¸ C.prototypeê³¼ ì—°ê²°ë˜ì–´ìˆë‹¤. ì´ë ‡ê²Œ ì—°ê²°ë˜ì–´ ì˜¬ë¼ê°ˆ ìˆ˜ ìˆëŠ” ê²ƒì´ `ì¸ìŠ¤í„´ìŠ¤ ê°ì²´ newB`ì˜ `í”„ë¡œí† íƒ€ì… ì²´ì¸`ì´ë‹¤. ì´ ì•ˆì— C.prototypeì´ ì†í•´ìˆëŠ”ì§€ë¥¼ ë³´ë©´ ì—­ì‹œë‚˜ ì†í•´ìˆê¸° ë•Œë¬¸ì— trueê°€ ëœë‹¤.

    ![prototypechain](../../image/prototypechain.png)

    > ìœ„ì˜ í”„ë¡œí† íƒ€ì…ì²´ì¸ì„ ê°„ë‹¨í•˜ê²Œ ê·¸ë ¤ë³¸ ì´ë¯¸ì§€ì´ë‹¤. ì°¸ê³ ë¡œ í”„ë¡œí† íƒ€ì… ì²´ì¸ì€ ì—¬ê¸°ì„œ ëë‚˜ëŠ” ê²ƒì€ ì•„ë‹ˆê³  **proto**ê°€ nullì´ ë ë•Œê¹Œì§€ ì´ì–´ì§„ë‹¤. `Object.prototype.__proto__ = null` ì´ê¸° ë•Œë¬¸ì— ë§ˆì§€ë§‰ì€ í•­ìƒ ìœ„ ìƒíƒœê°€ ëœë‹¤.

10. false
11. false
12. false

> ìœ„ ìƒí™©ì€ ì•„ê¹Œì™€ ê°™ì€ ìƒí™©ì´ë‹¤. C.prototypeì— ìƒˆë¡œìš´ ê°ì²´ê°€ í• ë‹¹ë¨ìœ¼ë¡œì„œ ì¸ìŠ¤í„´ìŠ¤ ê°ì²´ cì˜ í”„ë¡œí† íƒ€ì… ì²´ì¸ì¸ ëŠê¸°ê²Œ ëœë‹¤.

## ê¸¸ì„ ìƒì€ `í”„ë¡œí† íƒ€ì… ê°ì²´`ì—ê²Œ ê¸¸ì„ ì°¾ì•„ì£¼ê³  ì‹¶ë‹¤ë©´

> ì•„ê¹Œ ìœ„ì—ì„œ B.prototypeì— ìƒˆë¡œìš´ ê°ì²´ë¥¼ í• ë‹¹í•¨ìœ¼ë¡œì„œ bì˜ í”„ë¡œí† íƒ€ì… ì²´ì¸ì´ ëŠê¸°ê²Œ ë˜ì—ˆë‹¤. ê·¸ë˜ì„œ bëŠ” ì–´ë– í•œ ì²´ì¸ì—ë„ ì†í•˜ì§€ì•Šì€ ìƒíƒœê°€ ë˜ì—ˆë‹¤. ì´ê²ƒì„ ì´ bì™€ ì—°ê²°ëœ `ì˜ˆì „ì˜ B.prototype(í˜„ì¬ b.__proto__)` ë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì¡°ì‘í•´ë³´ë ¤ê³  í•œë‹¤.

```javascript
1   function B1() {}
2
3   var prototypeB = Object.getPrototypeOf(b);
4   console.log(prototypeB === b.__proto__);
5
6   B1.prototype = prototypeB;
7
8   console.log(b.__proto__ === B1.prototype);
9   console.log(b instanceof B1);
```

# Ref

-   [MDN\_ê°ì²´ì§€í–¥ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°œìš”](https://developer.mozilla.org/ko/docs/Web/JavaScript/Introduction_to_Object-Oriented_JavaScript)
-   [MDN_instanceof](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/instanceof)
