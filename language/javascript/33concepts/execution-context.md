# Execution Context

## ì •ì˜

## êµ¬ì„±

## ê³¼ì •

## Execution Context(ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸)ë€?

- í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ëŠ” ì˜ì—­, **ë¬¶ìŒ**ì„ ë§í•œë‹¤.
- í•¨ìˆ˜ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê³  ì‹¤í–‰ê²°ê³¼ë¥¼ ì €ì¥í•œë‹¤.
- í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ì‹œì ì— ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ëœë‹¤.
- í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë©´ `3ê°€ì§€ì˜ ê°’`ì„ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¡œ ë„˜ê²¨ì¤€ë‹¤.
  - í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ `object` ğŸ§· `this binding component`ì— ì„¤ì •
  - `í•¨ìˆ˜ ì½”ë“œ(í•¨ìˆ˜ ì•ˆì— ì‘ì„±ëœ ì½”ë“œ)` ğŸ§· `function object`ì˜ `[[Code]]` í”„ë¡œí¼í‹°ì— ì„¤ì •
  - í˜¸ì¶œí•œ í•¨ìˆ˜ì˜ `ì¸ì(parameterê°’)` ğŸ§· `Argument object`ì— ì„¤ì •

## Execution Context has two phases

- Creation phase

- Code execution phase

### ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ êµ¬ì„±

> ì•„ë˜ ì½”ë“œì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ì²˜ë¦¬ ê³¼ì •ì„ ì •ë¦¬í•´ë³´ê¸°

```javascript
function book() {
  function get() {
    return point;
  }

  var point = 123;
  return get();
}
console.log(book());
```

<ì¤€ë¹„ë‹¨ê³„>

1. `function` í‚¤ì›Œë“œë¥¼ ë§Œë‚˜ë©´ `function object(book)`ë¥¼ ìƒì„±í•œë‹¤.
2. ì´ ë•Œ, `function object` ì•ˆì˜ ë‚´ë¶€í”„ë¡œí¼í‹°ì¸ `[[SCOPE]]` ì— **í•¨ìˆ˜ ë°–ì˜ ìŠ¤ì½”í”„**(ì—¬ê¸°ì„  global scope)ë¥¼ ì„¤ì •
   > ì´ë ‡ê²Œ ìƒì„±ë˜ëŠ” ê²ƒì„ `Lexical Environment(ì •ì í™˜ê²½)`ì— ì˜í•´ ê²°ì •ëœ ìŠ¤ì½”í”„ì´ë‹¤.

> ì²˜ìŒ `function object`ë¥¼ ìƒì„±í•  ë•ŒëŠ” í•¨ìˆ˜ì˜ ë‚´ë¶€ë¥¼ í•´ì„í•˜ì§€ ì•ŠëŠ”ë‹¤.

3. ì´ í›„ `book()ì´ í˜¸ì¶œ`ë˜ë©´, í•´ë‹¹ í•¨ìˆ˜ì˜ `ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±`ëœë‹¤.
4. ì—”ì§„ì€ ì´ ìƒì„±ëœ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ ì•ˆìœ¼ë¡œ ì´ë™í•œë‹¤.

<ì¤€ë¹„ ë‹¨ê³„>

5. ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ì•ˆì˜ ì—¬ëŸ¬ê°€ì§€ ì»´í¬ë„ŒíŠ¸ì™€ ë ˆì½”ë“œë¥¼ ìƒì„±í•œë‹¤.
   ì´ ë•Œ ìƒì„±ëœ ì»´í¼ë„ŒíŠ¸ì™€ ë ˆì½”ë“œëŠ” ìš°ì„  ë¹ˆ ê°’ì„ ê°–ê²Œ ëœë‹¤.

6. function object ìƒì„±ì‹œ ê²°ì •ë˜ì—ˆë˜ `[[SCOPE]]`ì˜ `ì°¸ì¡°ê°’`ì„ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ì•ˆì˜ `Lexical Environment Component`ì˜ `Outer Lexical Environment Refenence`ì— ì²¨ë¶€í•œë‹¤.

> ì—¬ê¸°ê¹Œì§€ì˜ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ì˜ ìƒíƒœ

![ec1](./images/ec1.png)

<ì´ˆê¸°í™” ë‹¨ê³„>

7. ì´ì œë¶€í„° í•¨ìˆ˜ ë‚´ë¶€ì˜ ë³€ìˆ˜ì™€ í•¨ìˆ˜ë¥¼ ì´ˆê¸°í™” í•œë‹¤.

> í•¨ìˆ˜ ë‚´ë¶€ì˜ ë³€ìˆ˜ì™€ í•¨ìˆ˜ë“¤ì€ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ì•ˆì˜ `Lexical Environment Component`ì˜ `Environment Record`ì˜ `Declarative Environment Record`ì•ˆì— ì„¤ì •ëœë‹¤.

8. ì—¬ê¸°ì„œ ë‚´ë¶€ì˜ í•¨ìˆ˜ `function get() { }`ë¡œ ëœ `í•¨ìˆ˜ ì„ ì–¸ì‹`ì´ ìˆê¸° ë•Œë¬¸ì— ë‹¤ì‹œ ìœ„ì— í•œ ì‘ì—…ì„ ì§„í–‰í•œë‹¤. ì¦‰ í•¨ìˆ˜ì— ëŒ€í•œ `function object`ë¥¼ ìƒì„±í•˜ê³  ì´ `function object ì™¸ë¶€ í™˜ê²½`ì„ `[[SCOPE]]`ì— ì—°ê²° í•´ì¤€ë‹¤.

9. ë³€ìˆ˜ì˜ ê²½ìš°, `ë³€ìˆ˜ì´ë¦„ = undefined`ë¡œ ì´ˆê¸°í™” ëœë‹¤.(ë³€ìˆ˜ì˜ ì„ ì–¸)

> `var` ê°€ ì•„ë‹Œ `let, const`ê°™ì€ ê²½ìš°, `ë³€ìˆ˜ ì´ë¦„ = uninitialized` ê°€ ëœë‹¤. `ES6`ì˜ ì°¨ì´ì ì´ë‹¤

10. `parameter`ê°€ ìˆë‹¤ë©´, ë„˜ê²¨ë°›ì€ ê°’ì„ `ê°’`ìœ¼ë¡œ, parameterì˜ ì´ë¦„ì„ `ì´ë¦„`ìœ¼ë¡œ í•˜ì—¬ í•¨ìˆ˜ì˜ parameterì— `ë§µí•‘`ì‹œì¼œì„œ ì„¤ì •í•œë‹¤. ë˜í•œ ì´ ë•Œ `Arguments` ê°ì²´ê°€ ìƒì„±ëœë‹¤.

> ì—¬ê¸°ê¹Œì§€ì˜ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ì˜ ìƒíƒœ

![ec2](./images/ec2.png)

<ì‹¤í–‰ ë‹¨ê³„>

11. ì´ì œ ë³€ìˆ˜ `point`ì— ê°’ì„ í• ë‹¹í•˜ê³ , ê°’ì„ return í•œë‹¤.
    ì´ ë•Œ returnê°’ì´ í•¨ìˆ˜ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— get()ì— ëŒ€í•œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ê³  `ì¤€ë¹„ ë‹¨ê³„ì™€ ì´ˆê¸°í™” ë‹¨ê³„`ë¥¼ ê±°ì³ì„œ `point`ì— ëŒ€í•œ `indentifier resolution`ì´ ë˜ì–´ `123`ì´ë¼ëŠ” ê°’ì´ ì¶œë ¥ëœë‹¤.

> `parameter mapping` ê³¼ì •ì„ ì—”ì§„ê´€ì ì—ì„œ ì„¤ëª…í•˜ê¸°

> `paramter mapping`ì´ë€? í˜¸ì¶œí•œ í•¨ìˆ˜ì—ì„œ ë„˜ê²¨ì¤€ ì¸ì(parameter ê°’)ë¥¼ í˜¸ì¶œëœ í•¨ìˆ˜ì˜ `ì‘ì„±ìˆœì„œ`ì— ë”°ë¼ì„œ `function objectì˜ [[FormalParameters]]` í”„ë¡œí¼í‹°ì— ì‘ì„±ëœ ì´ë¦„(function objectìƒì„±ì‹œ ì´ë¯¸ ì‘ì„±ë˜ì–´ìˆìŒ)ì— ê°’ì„ ë§¤í•‘í•˜ê³  ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ì˜ `Declarative Environment Record`ì— ê²°ê³¼ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤.

```javascript
var obj = {};
obj.getTotal = function (one, two, two) {
  console.log(one + two); //66
};
obj.getTotal(11, 22, 55);
```

1. `function objectì˜ [[FormalParameters]]`ì— `one, two, two`ë¼ëŠ” parameterì˜ ì´ë¦„ì´ ì„¤ì •ëœë‹¤.
2. getTotal()ì´ í˜¸ì¶œë  ë•Œ, ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ì´ ë˜ê³  function objectì— ì„¤ì •ëœ parameter ì´ë¦„ì˜ `ì‘ì„±ìˆœì„œ`ì— ë”°ë¼ì„œ parameterê°’(arguments:11,22,55)ì´ `Declarative Environment Record`ì— ì…ë ¥ëœë‹¤.
3. console.log()ì˜ ì‹¤í–‰ë‹¨ê³„ì—ì„œ oneê³¼ twoì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ì°¾ëŠ”ë°, oneì€ ê·¸ë˜ë„ 11ì´ ì˜¤ê²Œë˜ì§€ë§Œ twoëŠ” ìˆœì„œëŒ€ë¡œ 22ì™€ 55ê°€ ì¡´ì¬í•˜ê¸°ë•Œë¬¸ì— ë§ˆì§€ë§‰ì— ì„¤ì •ëœ twoì˜ ê°’ì„ ê°€ì ¸ì˜¤ê²Œ ëœë‹¤.

## Ref

- [ìë°”ìŠ¤í¬ë¦½íŠ¸ ì¤‘ê³ ê¸‰ì ë˜ê¸°: ê·¼ë³¸ í•µì‹¬ ì´í•´ Section4](https://www.inflearn.com/course/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%A4%91%EA%B3%A0%EA%B8%89)

- [ëª¨ë˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì…ë¬¸ 8ì¥](http://www.yes24.com/Product/Goods/59410698)

- [Understanding Execution Context and Execution Stack in Javascript](https://blog.bitsrc.io/understanding-execution-context-and-execution-stack-in-javascript-1c9ea8642dd0))
